!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";var t=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},o=function(){function r(e){if(t(this,r),!e)throw new Error("Iterable array is null or undefined");if(!(e instanceof Array||e instanceof r))throw new Error("Invalid array type");this.arr=e}return e(r,[{key:Symbol.iterator,value:function(){return this.arr[Symbol.iterator]()}},{key:"toArray",value:function(){return Array.from(this)}}]),r}(),i=function(o){function i(e,r){t(this,i);var o=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));if("function"!=typeof r)throw new Error("Callback must be a function");return o.callback=r,o}return r(i,o),e(i,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function t(){var e,r,n,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,r=!1,n=void 0,t.prev=3,o=this.arr[Symbol.iterator]();case 5:if(e=(i=o.next()).done){t.next=12;break}return a=i.value,t.next=9,this.callback(a);case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),r=!0,n=t.t0;case 18:t.prev=18,t.prev=19,!e&&o.return&&o.return();case 21:if(t.prev=21,!r){t.next=24;break}throw n;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])})}]),i}(o),a=function(o){function i(e,r){t(this,i);var o=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));if(!r||r<1)throw new Error("The count must be larger than 0");return o.count=r,o}return r(i,o),e(i,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function t(){var e,r,n,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,r=!1,n=void 0,t.prev=3,o=this.arr[Symbol.iterator]();case 5:if(e=(i=o.next()).done){t.next=14;break}return a=i.value,t.next=9,a;case 9:if(!(--this.count<=0)){t.next=11;break}return t.abrupt("break",14);case 11:e=!0,t.next=5;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(3),r=!0,n=t.t0;case 20:t.prev=20,t.prev=21,!e&&o.return&&o.return();case 23:if(t.prev=23,!r){t.next=26;break}throw n;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},t,this,[[3,16,20,28],[21,,23,27]])})}]),i}(o),u=function(o){function i(e,r){t(this,i);var o=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));if("function"!=typeof r)throw new Error("Condition must be a function");return o.condition=r,o}return r(i,o),e(i,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function t(){var e,r,n,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,r=!1,n=void 0,t.prev=3,o=this.arr[Symbol.iterator]();case 5:if(e=(i=o.next()).done){t.next=13;break}if(a=i.value,!this.condition(a)){t.next=10;break}return t.next=10,a;case 10:e=!0,t.next=5;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),r=!0,n=t.t0;case 19:t.prev=19,t.prev=20,!e&&o.return&&o.return();case 22:if(t.prev=22,!r){t.next=25;break}throw n;case 25:return t.finish(22);case 26:return t.finish(19);case 27:case"end":return t.stop()}},t,this,[[3,15,19,27],[20,,22,26]])})}]),i}(o),c=function(o){function i(e,r){return t(this,i),n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,r))}return r(i,o),e(i,[{key:Symbol.iterator,value:regeneratorRuntime.mark(function t(){var e,r,n,o,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,r=!1,n=void 0,t.prev=3,o=this.arr[Symbol.iterator]();case 5:if(e=(i=o.next()).done){t.next=16;break}if(a=i.value,!this.condition(a)){t.next=12;break}return t.next=10,a;case 10:t.next=13;break;case 12:return t.abrupt("break",16);case 13:e=!0,t.next=5;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(3),r=!0,n=t.t0;case 22:t.prev=22,t.prev=23,!e&&o.return&&o.return();case 25:if(t.prev=25,!r){t.next=28;break}throw n;case 28:return t.finish(25);case 29:return t.finish(22);case 30:case"end":return t.stop()}},t,this,[[3,18,22,30],[23,,25,29]])})}]),i}(u);Array.prototype.aggregate=function(t,e){return new o(this).aggregate(t,e)},o.prototype.aggregate=function(t,e){if("function"!=typeof t)throw new Error("Missing accumulator function");var r=void 0,n=this[Symbol.iterator]();r="undefined"==typeof e?n.next().value:e;for(var o=void 0;(o=n.next())&&o&&!o.done;)r=t(r,o.value);return r},Array.prototype.all=function(t){return new o(this).all(t)},o.prototype.all=function(t){if(!t)throw new Error("Missing condition");var e=!0,r=!1,n=void 0;try{for(var o,i=this[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(!t(a))return!1}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}return!0},Array.prototype.any=function(t){return new o(this).any(t)},Array.prototype.first=function(t){return new o(this).first(t)},Array.prototype.where=function(t){return new u(this,t)},o.prototype.where=function(t){return new u(this,t)},o.prototype.first=function(t){return t?this.where(t).first():this[Symbol.iterator]().next().value},o.prototype.any=function(t){if(t){var e=!0,r=!1,n=void 0;try{for(var o,i=this[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(t(a))return!0}}catch(t){r=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(r)throw n}}return!1}return!!this.first()},Array.prototype.count=function(t){return new o(this).count(t)},o.prototype.count=function(t){if(t)return this.where(t).count();var e=0,r=!0,n=!1,o=void 0;try{for(var i,a=this[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){i.value;e++}}catch(t){n=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}return e},Array.prototype.select=function(t){return new i(this,t)},o.prototype.select=function(t){return new i(this,t)},Array.prototype.sum=function(){return new o(this).sum()},o.prototype.sum=function(){return this.aggregate(function(t,e){return t+e},0)},Array.prototype.take=function(t){return new a(this,t)},o.prototype.take=function(t){return new a(this,t)},Array.prototype.takeWhile=function(t){return new c(this,t)},o.prototype.takeWhile=function(t){return new c(this,t)}});
